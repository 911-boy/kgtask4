# ИНСТРУКЦИЯ ПО ПРОВЕРКЕ ОБРАБОТКИ ОШИБОК И ДЕПЛОЯ

## ПУНКТ 5: ПРОВЕРКА ОБРАБОТКИ ОШИБОК

### 5.1. Проверка ошибок при загрузке неверного OBJ-файла

**Шаги:**
1. Запустите приложение
2. Нажмите кнопку **"Load"** или меню **File → Load Model**
3. Выберите файл, который НЕ является OBJ-файлом (например, `.txt` файл с любым текстом)
4. Или создайте специально поломанный OBJ-файл:
   - Откройте блокнот
   - Создайте файл `broken.obj` с содержимым:
     ```
     v 1.0 2.0 abc
     v 1.0
     f 1 2 3 999
     ```
   - Сохраните и попробуйте загрузить

**Ожидаемый результат:**
- ✅ Программа **НЕ падает** и **НЕ зависает**
- ✅ Появляется окно с типом **ERROR** (красный значок)
- ✅ Заголовок окна: "Ошибка при чтении OBJ-файла"
- ✅ В тексте ошибки указан номер строки и причина ошибки (например: "Error parsing OBJ file on line: 1. Failed to parse float value.")
- ✅ После нажатия **OK** программа продолжает работать нормально
- ✅ Можно попробовать загрузить другой файл

**Где в коде:**
- `GuiController.java`, строки 314-316 (обработка `ObjReaderException`)

---

### 5.2. Проверка ошибок при чтении файла (IO ошибки)

**Шаги:**
1. Запустите приложение
2. Нажмите **"Load"**
3. Попробуйте выбрать файл из места, куда нет доступа (например, системная папка Windows без прав администратора)
4. Или выберите файл, который был удален между выбором и загрузкой

**Ожидаемый результат:**
- ✅ Появляется окно ошибки с заголовком "Ошибка при чтении файла"
- ✅ Описание ошибки от системы (например: "Access is denied" или "The system cannot find the file")
- ✅ Программа не падает, можно продолжить работу

**Где в коде:**
- `GuiController.java`, строки 317-320 (обработка `IOException`)

---

### 5.3. Проверка ошибок при сохранении

**Шаги:**
1. Загрузите любую модель
2. Нажмите **"Save"** или меню **File → Save Active Model**
3. Попробуйте сохранить в место, куда нет прав доступа:
   - Корень диска C: (если нет прав администратора)
   - Системная папка Windows
   - Или выберите файл, который открыт в другой программе (заблокирован)

**Ожидаемый результат:**
- ✅ Появляется окно ошибки "Ошибка при сохранении файла"
- ✅ Описание ошибки (например: "Access is denied")
- ✅ Программа продолжает работать, модель не потеряна

**Где в коде:**
- `GuiController.java`, строки 346-349 (обработка `IOException` при сохранении)

---

### 5.4. Проверка валидации при удалении (информационные сообщения)

**Шаги:**
1. Загрузите модель
2. Нажмите **"Del Polygon"** или **"Del Vertex"**
3. Введите неверный индекс:
   - Отрицательное число: `-1`
   - Слишком большое число: `99999`
   - Не число: `abc`

**Ожидаемый результат:**
- ✅ Появляется информационное окно (INFO, синий значок)
- ✅ Сообщение объясняет проблему (например: "Индекс должен быть в диапазоне 0..X" или "Индекс должен быть целым числом")
- ✅ Модель не изменяется, можно попробовать снова

**Где в коде:**
- `GuiController.java`, строки 481-487 (`showInfo` метод)
- Используется в методах удаления: строки 415, 427, 469, 476

---

## ПУНКТ 6: ПРОВЕРКА ДЕПЛОЯ

### 6.1. Сборка портативного приложения

**Шаги:**
1. Откройте PowerShell или командную строку в корне проекта:
   ```
   cd "G:\01Prog\task in vsu\KG\task4render\CGVSU-main\Task4\Simple3DViewer"
   ```

2. Выполните команду сборки:
   ```bash
   mvn clean package -DskipTests=true
   ```

3. Дождитесь завершения сборки (может занять 1-2 минуты)

**Ожидаемый результат:**
- ✅ В папке `target` появится файл `cgvsu.jar`
- ✅ Размер файла должен быть примерно 15-20 МБ (включает все зависимости)
- ✅ В консоли должно быть сообщение `BUILD SUCCESS`

**Где в коде:**
- `pom.xml`, строки 78-103 (настройка `maven-assembly-plugin`)

---

### 6.2. Проверка запуска портативного приложения

**Шаги:**
1. Убедитесь, что на компьютере установлена **JDK 17 или выше**
   - Проверьте командой: `java -version`
   - Должно показать версию 17 или выше

2. Перейдите в папку `target`:
   ```bash
   cd target
   ```

3. Запустите приложение:
   ```bash
   java -jar cgvsu.jar
   ```

**Ожидаемый результат:**
- ✅ Приложение запускается **БЕЗ IDE** (IntelliJ IDEA, VS Code и т.д.)
- ✅ Окно Simple3DViewer открывается нормально
- ✅ Все функции работают:
  - Загрузка моделей
  - Сохранение моделей
  - Переключение между моделями
  - Удаление полигонов/вершин
  - Темы оформления
  - Вращение и зум

**Важно:**
- ✅ Приложение должно работать на **любом компьютере** с JDK 17+
- ✅ Не требуется установка Maven или других инструментов разработки
- ✅ Это и есть "портативное приложение" для сдачи

---

### 6.3. Проверка на другом компьютере (опционально)

**Шаги:**
1. Скопируйте файл `target/cgvsu.jar` на другой компьютер (через USB, сеть и т.д.)
2. Убедитесь, что на том компьютере установлена JDK 17+
3. Запустите: `java -jar cgvsu.jar`

**Ожидаемый результат:**
- ✅ Приложение работает так же, как на вашем компьютере
- ✅ Все функции доступны

---

### 6.4. Создание удобного запуска (опционально)

Можно создать `.bat` файл для Windows для удобного запуска:

**Создайте файл `run.bat` в папке `target`:**
```batch
@echo off
java -jar cgvsu.jar
pause
```

Теперь можно просто дважды кликнуть на `run.bat` для запуска.

---

## ЧЕКЛИСТ ПРОВЕРКИ

### Обработка ошибок:
- [ ] Ошибка при загрузке неверного OBJ-файла - показывается окно ошибки
- [ ] Ошибка при чтении файла - показывается окно ошибки
- [ ] Ошибка при сохранении - показывается окно ошибки
- [ ] Валидация при удалении - показываются информационные сообщения
- [ ] Программа не падает при ошибках
- [ ] После ошибки можно продолжить работу

### Деплой:
- [ ] Команда `mvn clean package` выполняется успешно
- [ ] Файл `target/cgvsu.jar` создается
- [ ] Приложение запускается командой `java -jar cgvsu.jar`
- [ ] Приложение работает без IDE
- [ ] Все функции работают в портативном приложении

---

## ВОЗМОЖНЫЕ ПРОБЛЕМЫ И РЕШЕНИЯ

### Проблема: "mvn: command not found"
**Решение:** Установите Maven или используйте встроенный Maven в IntelliJ IDEA:
- В IntelliJ: View → Tool Windows → Maven
- Выберите проект → Lifecycle → package
- Двойной клик на "package"

### Проблема: "java: command not found"
**Решение:** Установите JDK 17 или выше и добавьте в PATH

### Проблема: "Error: JavaFX runtime components are missing"
**Решение:** Убедитесь, что в `pom.xml` правильно настроен `maven-assembly-plugin` (должен включать все зависимости)

### Проблема: JAR файл не запускается
**Решение:** 
1. Проверьте версию Java: `java -version` (должна быть 17+)
2. Попробуйте запустить с явным указанием пути к Java:
   ```bash
   "C:\Program Files\Java\jdk-17\bin\java.exe" -jar cgvsu.jar
   ```

---

## ИТОГ

После выполнения всех проверок вы должны убедиться, что:
1. ✅ Обработка ошибок работает корректно - пользователь видит понятные сообщения
2. ✅ Деплой работает - приложение запускается как портативное без IDE
3. ✅ Все функции доступны в портативном приложении

Это подтверждает выполнение пунктов 5 и 6 задания!


